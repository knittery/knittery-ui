@(steps: Seq[models.guide.GuideStep], step: models.guide.GuideStep, instruction: models.guide.Instruction)
@main("Guide", "wide-container guide") {
  <div class="step-display row">
    <div class="col-md-2">
      <div class="panel panel-default graphical">
        <div class="panel-heading">
          <span class="buttonbar left prev navbar-form">
            <button type="button" @if(step.position.isFirst) {disabled} id="first" class="btn btn-xs btn-default">
            <span class="glyphicon glyphicon-fast-backward"></span>
            </button>
            <button type="button" @if(step.position.isFirst) {disabled} id="prev" class="btn btn-xs btn-default">
            <span class="glyphicon glyphicon-chevron-left"></span>
            </button>
          </span>
          <h2 class="panel-title text-center">
            knitted
          </h2>
        </div>
        <div class="panel-body previous-steps step-list">
          <ul>
          @steps.reverse.map { s =>
            <li class="previous-step" data-step="@s.position.index" @if(s.position >= step.position) {style="display: none"}>@s.title.value </li>
          }
          </ul>
        </div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="panel panel-default graphical">
        <div class="panel-heading">
          <span class="buttonbar right">
            [TODO Progress bar]
          </span>
          <h2 class="panel-title">
            Current Step (<span class="current-step-number">@(step.position.index + 1)</span>
            of <span class="step-number-total">@steps.size</span>)
          </h2>
        </div>
        <div class="panel-body current-step">
          <div class="right" id="instruction-text">@instruction.text.value</div>
        </div>
      </div>
    </div>

    <div class="col-md-2">
      <div class="panel panel-default graphical">
        <div class="panel-heading">
          <span class="buttonbar right next navbar-form">
            <button type="button" @if(step.position.isLast) {disabled} id="next" class="btn btn-xs btn-default">
            <span class="glyphicon glyphicon-chevron-right"></span>
            </button>
            <button type="button" @if(step.position.isLast) {disabled} id="last" class="btn btn-xs btn-default">
            <span class="glyphicon glyphicon-fast-forward"></span>
            </button>
          </span>
          <h2 class="panel-title text-center">
            to knit
          </h2>
        </div>
        <div class="panel-body next-steps step-list">
          <ul>
          @steps.map { s =>
            <li class="next-step" data-step="@s.position.index" @if(s.position >= step.position) {style="display: none"}>@s.title.value </li>
          }
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="machine-display">
    <div class="panel panel-default graphical">
      <div class="panel-body">
        <div class="carriage-displays">
          <div class="kcarriage"></div>
          <div class="doublebedcarriage"></div>
        </div>
        <div class="beds">
          <div>
            <div class="machine"></div>
            <div class="needles main" data-needles=""></div>
            <div id="bar" class="progress">
              <div class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="199" style="width : 0 %">
                <span class="sr-only"></span>
              </div>
            </div>
            <div class="needles double" data-needles=""></div>
            <div class="machine"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="output-display">
    <div class="panel panel-default graphical">
      <div class="panel-body">
        <div class="output-selection btn-group">
          <button type="button" id="btn-output-3d" class="btn btn-xs">
            <span class="glyphicon glyphicon-globe"></span>
          </button>
          <button type="button" id="btn-output-2d" class="btn btn-xs btn-default">
            <span class="glyphicon glyphicon-picture"></span>
          </button>
        </div>

        <div class="outputs">
          <div class="output-2d output"></div>
          <div class="output-3d output"></div>
        </div>
      </div>
    </div>
  </div>
  </div>

}(List("guide", "needles", "machine", "guide-model", "3dview"))